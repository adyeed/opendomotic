<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                template="../template/default.xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core">

    <ui:define name="content">

        <p:commandButton value="#{msg.New}" action="#{jobMB.create()}" update="dialog"/>

        <p:panel id="dialog" header="#{msg.Job}" visible="#{jobMB.visible}">
            <h:inputHidden value="#{jobMB.entity.id}"/>

            <p:panel header="#{msg.Input}">
                <p:tabView id="tabView" activeIndex="#{jobMB.tabActiveIndex}">    
                    <p:tab id="tab1" title="#{msg.Device}">  
                        <h:panelGrid columns="2">
                            <h:outputText value="#{msg.Device}"/>
                            <p:selectOneMenu value="#{jobMB.idInput}">
                                <f:selectItem itemLabel="#{msg.None}" itemValue="#{null}"/>
                                <f:selectItems value="#{configMB.listAllOrderByName}" var="d" itemValue="#{d.id}" itemLabel="#{d.name}"/>
                            </p:selectOneMenu>  

                            <h:outputText value="#{msg.Operator}"/>
                            <p:selectOneMenu value="#{jobMB.entity.operator}">
                                <f:selectItems value="#{jobMB.listOperator}"/>
                            </p:selectOneMenu>  

                            <h:outputText value="#{msg.ExpectValue}"/>
                            <p:inputText value="#{jobMB.entity.expectValue}"/>
                        </h:panelGrid>  
                    </p:tab>  

                    <p:tab id="tab2" title="#{msg.Date}">  
                        <p:calendar value="#{jobMB.entity.inputDate}" mode="inline"/>
                        <br/>
                        #{msg.Hour}
                        <p:spinner value="#{jobMB.hour}" min="0" max="23" size="2"/>
                        :
                        <p:spinner value="#{jobMB.minute}" min="0" max="59" size="2"/>
                    </p:tab>   
                </p:tabView>

            </p:panel>

            <br/>

            <p:panel header="#{msg.Output}">
                <h:panelGrid columns="2">
                    <h:outputText value="#{msg.Device}"/>
                    <p:selectOneMenu value="#{jobMB.idOutput}">
                        <f:selectItems value="#{configMB.listAllOrderByName}" var="d" itemValue="#{d.id}" itemLabel="#{d.name}"/>
                    </p:selectOneMenu>  

                    <h:outputText value="#{msg.ActionValue}"/>
                    <p:inputText value="#{jobMB.entity.actionValue}"/>

                    <h:outputText value="#{msg.DeleteAfterExecute}"/>
                <p:selectBooleanCheckbox value="#{jobMB.entity.deleteAfterExecute}"/>
                </h:panelGrid>          
            </p:panel>

            <br/>

            #{msg.Enabled}
            <p:selectBooleanCheckbox value="#{jobMB.entity.enabled}"/>  
            
            <br/>
            <br/>
            
            <p:commandButton value="#{msg.Save}" action="#{jobMB.save}" update="dialog,table"/>
            <p:commandButton value="#{msg.Cancel}" action="#{jobMB.cancel}" update="dialog"/>
        </p:panel>

        <br/>

        <p:dataTable id="table" value="#{jobMB.listAll}" var="job" emptyMessage="#{msg.WithoutJob}">
            <p:column>
                <f:facet name="header">
                    <h:outputText value="#{msg.Input}"/>
                </f:facet>
                #{job.inputDescription}
            </p:column>
            <p:column>
                <f:facet name="header">
                    <h:outputText value="#{msg.Output}"/>
                </f:facet>
                #{job.outputDescription}
            </p:column>            
            <p:column style="text-align: center;">
                <f:facet name="header">
                    <h:outputText value="#{msg.Delete}"/>
                </f:facet>
                <p:graphicImage value="../resources/images/button/checked.png" rendered="#{job.deleteAfterExecute}"/>
                <p:graphicImage value="../resources/images/button/unchecked.png" rendered="#{!job.deleteAfterExecute}"/>
            </p:column>
            <p:column style="text-align: center;">
                <f:facet name="header">
                    <h:outputText value="#{msg.Enabled}"/>
                </f:facet>
                <p:graphicImage value="../resources/images/button/checked.png" rendered="#{job.enabled}"/>
                <p:graphicImage value="../resources/images/button/unchecked.png" rendered="#{!job.enabled}"/>
            </p:column>
            <p:column>
                <p:commandButton value="#{msg.Delete}" action="#{jobMB.delete(job)}" update="table" onclick="return confirm('#{msg.ConfirmsTheExclusion}');"/>
                <p:commandButton value="#{msg.Edit}" action="#{jobMB.edit(job)}" update="@form"/>
                <p:commandButton value="#{job.enabled ? msg.Disable : msg.Enable}" action="#{jobMB.toggleEnable(job)}" update="table"/>
            </p:column>
        </p:dataTable> 

    </ui:define>

</ui:composition>
